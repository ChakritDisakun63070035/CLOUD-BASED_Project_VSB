<div>

  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VSB</title>
    <link rel="icon" href="../uploads/logo.png" />
    <link href="/css/bootstrap.css" rel="stylesheet" />
    <link href="/css/css.css" rel="stylesheet" />
    <script src="/js/bootstrap.bundle.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="https://unpkg.com/vue@2.2.6/dist/vue.js"></script>

    <!-- CDN AXIOS -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  </head>
  <header>

  </header>

  <body>
    <div id="app">
      <div v-for="info in data">
        <header>
          <nav class="navbar navbar-expand-lg navbar-light" id="backgroud_nav">
            <div class="container-fluid" v-for="user in users">
              <a class="navbar-brand" :href="'/allcourse/' + user.user_id">
                <img src="/uploads/logo.png" alt="" width="60" height="60" />
              </a>

              <div class="d-flex">
                <a class="navbar-brand" :href="'/allcourse/' + user.user_id +
                  '/mycourse'">
                  <i class="bi bi-book fs-4"></i>
                  My Course
                </a>
                <a class="navbar-brand" :href="'/mycart/' + user.user_id">
                  <i class="bi bi-cart4 fs-4"></i>
                  My Cart
                </a>
                <li class="nav dropdown">
                  <a class="nav-link dropdown-toggle text-dark" href="#"
                    id="navbarScrollingDropdown" role="button"
                    data-bs-toggle="dropdown" aria-expanded="false">
                    <img :src="'/' + user.image" alt="" width="32" height="32"
                      class="d-inline-block align-text-top" />
                    {{user.user_fname}}
                  </a>
                  <ul class="dropdown-menu"
                    aria-labelledby="navbarScrollingDropdown">
                    <li><a class="dropdown-item" :href="'/profile/' +
                        user.user_id + '/'">Profile</a></li>
                    <li><a class="dropdown-item"
                        :href="'/sign-out/' + user.user_id">Logout</a></li>
                  </ul>
                </li>
              </div>
            </div>
          </nav>
        </header>

        <img :src=info.preview_img alt="Girl in a jacket" width="100%"
          height="450">

        <div class="container">
          <div class="row mt-5">

            <div class="col-md-7 col-sm-12">
              <div class="row">

                <div class="card" style="width: 38rem;">
                  <div class="card-body">
                    <h3 class="card-title">{{info.course_name}}</h3>
                    <p class="card-text"> {{info.course_info}} </p>
                    <img :src=info.teacher_image width="60" height="60" alt="">
                    <span> {{info.teacher_fname+ ' '+ info.teacher_lname}}</span>
                  </div>
                </div>
              </div>
              <div class="row">

                <div class="col-sm-12 ps-0">
                  <div class="card border-trans" style="width:
                    28rem;">
                    <div class="card-body">
                      <h5 class="card-title">Description</h5>
                      <p class="card-text">
                        {{info.course_des}}
                      </p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-12 ps-0">
                  <div class="card border-trans" style="width:
                    35rem;">
                    <div class="card-body">
                      <h5 class="card-title">What you'll
                        learn</h5>
                      <div class="row">
                        <div class="col-sm-6">
                          <p><i class="bi
                              bi-check-lg"></i> {{info.learn1}}</p>
                          <p><i class="bi
                              bi-check-lg"></i> {{info.learn2}}</p>
                          
                        </div>
                        <div class="col-sm-6">
                          <p><i class="bi
                              bi-check-lg"></i> {{info.learn3}}</p>
                          <p><i class="bi
                              bi-check-lg"></i> {{info.learn4}}</p>
                          
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <h5><b>Instructors</b></h5>
              </div>
              <div class="row">
                <div class="card mb-3" style="max-width:
                  520px;">
                  <div class="row g-0">
                    <div class="col-md-4">
                      <div class="text-center mt-4">
                        <img :src=info.teacher_image class="img-fluid
                          rounded-circle"alt="..." width="130" height="130">
                      </div>
                    </div>
                    <div class="col-md-8">
                      <div class="card-body">
                        <br>
                        <p><i class="bi bi-person-square me-2"></i>{{info.teacher_fname
                          + ' ' +
                          info.teacher_lname}}</p>
                        <p><i class="bi bi-caret-right-fill me-2"></i>{{info.position}}
                        </p>
                        <br>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="card border-trans">
                  <div class="card-body ps-0">
                    <p> {{info.teacher_des}} </p>
                  </div>
                </div>
              </div>

            </div>
            <div class="col-md-5 col-sm-12">
              <div class="card gray" style="width: 35rem;">
                <div class="text-center mt-3">
                  <div class="text-center mt-3">
                    <iframe width="442" height="245" :src="info.preview_video" title="YouTube video player" frameborder="0" allow="accelerometer;
                                            autoplay;
                                            clipboard-write;
                                            encrypted-media; gyroscope;
                                            picture-in-picture" allowfullscreen></iframe>
                                            
                                            
                  </div>
                </div>
                <div class="card-body">
                  <div class="row">
                    <h5 class="card-title"><b> {{info.course_price+'฿'}} </b></h5>
                  </div>
                  <div class="row my-2 mb-3" v-for="user in users">
                    <div class="col-sm-6  d-grid gap-2">
                      <a :href="'create/cart/' + user.user_id + '/' + info.course_price" class="button btn btn-primary" type="button">Add to cart</a>
                    </div>
                    <div class="col-sm-6 d-grid gap-2">
                      <a href="/mycart" class="button btn btn-danger">Buy now</a>
                    </div>
                  </div>
                </div>
              </div>

              <!-- ADD LIKE -->
              <div class="my-3"> <a @click="addLikeCourse(info.course_id, users[0].user_id)"><i class="bi bi-hand-thumbs-up-fill text-primary fs-1"></i> </a> {{info.like}} people like this course </div>
            </div>


          </div>
        </div>

      </div>
    </div>
  </body>
  <script>
    var app = new Vue({
      el: "#app",
      data: {
        data: JSON.parse(`<%- data %>`),
        users: JSON.parse(`<%- users %>`)
      },
      methods: {
        addLikeCourse(courseID, userID) {
      axios
        .put(`http://localhost:3000/course/${courseID}/${userID}`)
        .then((response) => {
          console.log("ADD LIKE SUCCES");
          let info = this.data[0]
          info.like = response.data.like
          
        })
        .catch((error) => (this.error = error.message));
    }
      }
    })
  </script>
  <footer class="footer py-3 mt-5 bg-light">
    <div class="container">
      <div class="row">
        <div class="col-6">
          <h5>Browse popular topics</h5>
          <ul class="list-unstyled text-small">
            <li>
              <a class="link-secondary text-decoration-none" href="#">ABC</a>
            </li>
            <li>
              <a class="link-secondary text-decoration-none" href="#">Math</a>
            </li>
            <li>
              <a class="link-secondary text-decoration-none" href="#">Eng</a>
            </li>
          </ul>
        </div>
        <div class="col-6">
          <h5>Popular courses and articles</h5>
          <ul class="list-unstyled text-small">
            <li>
              <a class="link-secondary text-decoration-none" href="#">ABC</a>
            </li>
            <li>
              <a class="link-secondary text-decoration-none" href="#">Math</a>
            </li>
            <li>
              <a class="link-secondary text-decoration-none" href="#">Eng</a>
            </li>
          </ul>
        </div>
        <div class="col-6">
          <h5>VSB</h5>
          <ul class="list-unstyled text-small">
            <li>
              <a class="link-secondary text-decoration-none" href="#">About</a>
            </li>
            <li>
              <a class="link-secondary text-decoration-none" href="#">Catalog</a>
            </li>
            <li>
              <a class="link-secondary text-decoration-none" href="#">Team</a>
            </li>
          </ul>
        </div>
        <div class="col-12 border-top my-4"></div>
        <div class="col-9 mt-2">
          <small class="text-muted">© 2022 VSB. All rights
            reserved</small>
        </div>
        <div class="col-3 icon">
          <i class="bi bi-facebook text-primary mx-2"></i>
          <i class="bi bi-twitter text-info mx-2"></i>
          <i class="bi bi-github mx-2"></i>
          <i class="bi bi-linkedin text-primary mx-2"></i>
          <i class="bi bi-youtube text-danger mx-2"></i>
        </div>
      </div>
    </div>
  </footer>

</html>